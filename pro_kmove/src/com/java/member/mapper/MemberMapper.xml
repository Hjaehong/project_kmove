<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.java.member.mapper.MemberMapper">
	<resultMap type="com.java.member.dto.MemberDto" id="memberDto">
		<result column="member_number" property="member_number"/> 
		<result column="id" property="id"/>
		<result column="password" property="password"/>
		<result column="name" property="name"/>
		<result column="nickname" property="nickname"/>
		
		<result column="zipcode" property="zipcode"/>
		<result column="address" property="address"/>
		<result column="phone1" property="phone1"/>
		<result column="phone2" property="phone2"/>
		<result column="phone3" property="phone3"/>

		<result column="ban" property="ban"/>
		<result column="grade" property="grade"/>
		<result column="profile" property="profile"/>
	</resultMap>
	
	<insert id="memberInsert" parameterType="com.java.member.dto.MemberDto">
		insert into member (member_number, id, password, name, nickname, zipcode, address, phone1, phone2, phone3, ban, grade, profile) 
		values(member_member_number_seq.nextval, 
		#{id}, 
		#{password},
		#{name},  
		#{nickname}, 
		#{zipcode}, 
		#{address}, 
		#{phone1},
		#{phone2},
		#{phone3}, 
		0,
		0,
		0)
	</insert>
	
	<select id="memberIdCheck" parameterType="String" resultType="String">
		select id from member where id = #{id}
	</select>
	
	<select id="memberLoginCheck" parameterType="java.util.HashMap" resultType="String">
		select grade from member where id = #{id} and password = #{password}
	</select>
	
	<delete id="memberDelete" parameterType="java.util.HashMap">
		delete from member where id = #{id} and password = #{password}
	</delete>
	
	<select id="memberUpdateId" parameterType="String" resultMap="memberDto">
		select * from member where id = #{id}
	</select>
	
	<update id="memberUpdate" parameterType="com.java.member.dao.MemberDao">
		update member set 
		password= #{password}, 
		email= #{email}, 
		zipcode= #{zipcode}, 
		address= #{address}, 
		job= #{job}, 
		mailing= #{mailing}, 
		interest= #{interest} 
		where num= #{num}
	</update>
</mapper>

















